## chap02 简单的模式匹配

[RegExr](http://gskinner.com/RegExr)</br>

通常可以将简写式取反，取反的结果就是排除</br>
\D</br>
[^0-9]</br>
[^\d]</br>
都是匹配非数字字符</br>

匹配单词和非单词字符</br>
\w</br>
这个简写式将匹配所有的单词字符.\D与\w的区别是\D会匹配空格，标点符号(引号，连字符，反斜杠，方括号)等字符，而\w却不会，它只匹配字母，数字和下划线。</br>

在英语环境中，与\w匹配相同内容的字符组为:</br>
[_a-zA-Z0-9]</br>

匹配非单词字符：</br>
\W</br>
[^_a-zA-Z0-9]</br>

常见的字符简写式</br>
\a 报警符</br>
[\b] 退格字符</br>
\c x 控制字符 </br>
\d  数字字符</br>
\D  非数字字符</br>
\o xxx 字符的八进制值</br>
\w  单词字符</br>
\W  非单词字符</br>
\0 空字符</br>
\x xx  字符的十六进制值</br>
\u xxx  字符的Unicode值</br>

匹配空白符</br>
\s</br>
[ \t\n\r]</br>
它会匹配：</br>
空白</br>
制表符(\t)</br>
换行符(\n)</br>
回车符(\r)</br>

匹配非空白字符</br>
\S</br>
[^ \t\n\r]</br>
[^\s]</br>

各种空白符的简写式</br>
\f  换页符</br>
\h  水平空白符</br>
\H  非水平空白符</br>
\n  换行符</br>
\r  回车符</br>
\s  空白符</br>
\S  非空白符</br>
\t  水平制表符</br>
\v  垂直制表符</br>
\V  非垂直制表符</br>

匹配任意字符</br>
使用点号，可以匹配除行结束符之外的所有字符，个别情况除外。

\bA.{5}T\b</br>
简写式\b匹配单词边界，不消耗任何字符。</br>
字符A和T限定了字符序列的首尾字母</br>
.{5}匹配任意五个字符</br>
简写式\b匹配单词的另一个边界</br>

\b\w{7}\b</br>
.* 匹配零个或多个字符</br>
相当于 [^\n] 或[^\n\r]</br>
.+ 匹配一个或多个

给文本加标签</br>
RegExr中的Replace(替换)标签，在第一个文本框中输入(^T.*$)，在第二个文本框中输入<h1>$1</h1>，则将第一个表达式匹配的字符串替换为第二个表达式。</br>

$1是一个perl风格的后向引用。还可以使用\1表示后向引用。</br>

用sed为文本加标签</br>
sed是Unix流编辑器，它支持用正则表达式转换文本。sed由20世纪70年代早期由Lee McMahon于贝尔实验室开发。</br>

echo Hello | sed s/Hello/Goodbye/</br>
sed的s命令将单词Hello变为Goodbye，而Goodbye就显示在屏幕上。</br>

```sed -n 's/^/<h1>/;s/$/<\/h1>/p;q' rime.txt</br>```

该命令的执行过程：</br>
首先调用sed程序</br>
sed默认的操作是直接复制每行输入并输出，-n选项覆盖了该默认操作，之所以要覆盖默认操作，是因为我们只想让正则表达式影响第一行。</br>
`s/^/<h1>/`在行的开头(^)添加`<h1>`标签</br>
分号(;)用于分隔命令</br>
`s/$/<\/h1>/`在行的结尾($)添加`</h1>`标签</br>
命令p会打印受影响的那一行(第一行).与-n不同，后者会打印所有行。</br>
最后命令q结束程序，这样sed程序就只会处理第1行。</br>
所有的操作都是针对rime.txt文件执行的。</br>

这个命令的另一种写法是-e选项分别引导每个命令。</br>
``` sed -ne 's/^/<h1>/' -e 's/$/<\/h1>/p' -e 'q' rime.txt```
可以将这些命令写道文件里，比如h1.sed
```
#!/usr/bin/sed
s/^/<h1>/
s/$/<\/h1>/
q
```
若要运行该文件，在与rime.txt路径下运行：</br>
`sed -f h1.sed rime.txt`

用Perl为文本加标签</br>
Perl是由Larry Wall于1987年创立的一种通用程序设计语言。它以对正则表达式的强大支持和文本处理能力而闻名</br>
`perl -v`查看系统perl安装的版本</br>

``` perl -ne 'if ($. == 1) {s/^/<h1>/; s/$/<\/h1>/m; print; }' rime.txt ```
这个perl命令的执行过程解析</br>
perl调用了Perl程序。</br>
-n 选项输出全部输入内容(rime.txt文件)</br>
-e 选项允许在命令行(而不是在文件)中提交程序代码</br>
if语句检查是否在第一行，在perl中$.是哥特殊的变量，它匹配当前行</br>
第一个替换命令s先找到第一行的开头(^)然后插入`<h1>`标签</br>
第二个替换命令s搜寻行结尾($),再插入`</h1>`标签</br>
替换命令最后的m(多行)修饰符，表示将本行单独处理，这样，$就只匹配第一行的结尾而不会匹配整个文本的结尾</br>
最后在标准输出设备(屏幕)中打印出结果。</br>
所有这些操作都是针对rime.txt文件的。</br>

将命令放在文件中:</br>
```
#!/usr/bin/perl -n

if($. == 1) {
    s/^/<h1>/;
    s/$/<\/h1>/m;
    print;
}
```
在rime.txt目录下，执行如下命令</br>
```perl h1.p1 rime.txt```




